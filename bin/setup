#!/usr/bin/env ruby
require 'pathname'
dir = Pathname.new(__FILE__).realpath + "../../dotfiles"
ok = true
Dir.glob(File.join(dir, "**/*"), File::FNM_DOTMATCH).each do |dotfile|
  next if File.directory? dotfile
  basename = File.basename dotfile
  exec = "rm \"#{dotfile}\" && mv \"#{File.expand_path('~/' + basename)}\" \"#{dir}\" && ln -s \"#{dotfile}\" ~/"
  #puts exec
  output = `#{exec}`
  $stderr.puts output unless $?.success?
end
